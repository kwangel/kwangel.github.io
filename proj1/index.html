<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Katie's CS180 Project 1</title>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Quicksand', Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: #fff0f6;
            color: #333;
        }

        header {
            background: linear-gradient(to right, #ffb6c1, #ffc0cb, #ff69b4);
            padding: 30px 20px;
            text-align: center;
            color: white;
            border-bottom: 4px solid #ff85a2;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        header h1 {
            margin: 0;
            font-size: 2.5em;
        }

        .content {
            padding: 30px 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .question-section {
            background: white;
            margin: 30px 0;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            text-align: left;
        }

        .question-header {
            background: linear-gradient(to right, #ffb6c1, #ffc0cb);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
            text-align: center;
        }

        .question-header h2 {
            margin: 0;
            font-size: 1.8em;
        }

        .image-container {
            text-align: center;
            margin: 15px;
            width: 400px;
            flex-shrink: 0;
        }

        .image-container img {
            width: 400px;
            height: 400px;
            object-fit: cover;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            margin: 5px;
        }

        .image-caption {
            font-style: italic;
            color: #666;
            margin-top: 10px;
            font-size: 0.9em;
        }

        a {
            display: inline-block;
            margin-top: 20px;
            text-decoration: none;
            background: #ff85a2;
            color: white;
            padding: 12px 24px;
            border-radius: 25px;
            transition: background 0.3s ease;
            font-weight: 600;
        }

        a:hover {
            background: #ff5e88;
        }

        .images-row {
            display: flex;
            justify-content: space-evenly;
            align-items: flex-start;
            flex-wrap: wrap;
            gap: 20px;
            margin: 20px 0;
        }

        .back-link {
            text-align: center;
            margin-top: 40px;
        }

        .explanation {
            margin-bottom: 20px;
            font-size: 1.05em;
            line-height: 1.6em;
        }
    </style>
</head>
<body>

    <header>
        <h1>CS180 Project 1</h1>
    </header>

    <div class="content">
        
        <div class="question-section">
            <div class="question-header">
                <h2>Part 1: JPG Images</h2>
            </div>
            <p class="explanation">
                The function align_ncc searches over a range of pixel shifts (¬±15 by default) to find the shift that maximizes normalized cross-correlation between two channels. 
                To avoid edge artifacts, the code searches at the center of the image assuming there's a border that is 15% of the length and width.
                Aligning against the blue channel worked well for smaller images like JPGs.
            </p>

            <div class="images-row">
                <div class="image-container">
                    <img src="./media_proj1/aligned_cathedral.jpg" alt="Result 1">
                     <div class="image-caption">R:(12, 3), G:(5, 2)</div>
                </div>
                <div class="image-container">
                    <img src="./media_proj1/aligned_monastery.jpg" alt="Result 2">
                    <div class="image-caption">R:(3, 2), G:(-3, 2) </div>
                </div>
                <div class="image-container">
                    <img src="./media_proj1/aligned_tobolsk.jpg" alt="Result 3">
                    <div class="image-caption">R:(6, 3), G:(3, 3) </div>
                </div>
            </div>   
        </div>  

        <div class="question-section">
            <div class="question-header">
                <h2>Part 2: TIF Images</h2>
            </div>
            <p class="explanation">
                For high-resolution .tif images, alignment directly at full resolution is expensive and unstable. align_multiscale implements a pyramid (coarse-to-fine) approach where
                it start at a very low resolution (12.5% of original size), aligns at that scale using NCC but searching over only ¬±5 pixel shifts, upscales the shift to a finer resolution, refines the alignment, and repeats until reaching full size.
                This improves accuracy and reduces runtime on large images. I noticed that since some .tif images have large white borders, so I removed as much as I could by detecting rows/columns with nearly uniform color.
                After cropping, channels may have slightly different sizes, so I padded them back to the same dimensions with a neutral color for alignment. I found that padding with a neutral color was better than resizing
                the channels after cropping. Additionally, aligning against the green channel gave the best results.
            </p>

            <div class="images-row">
                <div class="image-container">
                    <img src="./media_proj1/aligned_church.jpg" alt="Result 1">
                     <div class="image-caption">R:(13, 0), B:(-5, -18)</div>
                </div>
                <div class="image-container">
                    <img src="./media_proj1/aligned_emir.jpg" alt="Result 2">
                    <div class="image-caption">R:(13, 13), B:(-3, -32) </div>
                </div>
                <div class="image-container">
                    <img src="./media_proj1/aligned_harvesters.jpg" alt="Result 3">
                    <div class="image-caption">R:(65, -3), B:(-60, -17) </div>
                </div>
                <div class="image-container">
                    <img src="./media_proj1/aligned_icon.jpg" alt="Result 4">
                     <div class="image-caption">R:(48, 5), B:(-41, -17)</div>
                </div>
                <div class="image-container">
                    <img src="./media_proj1/aligned_italil.jpg" alt="Result 5">
                    <div class="image-caption">R:(0, 17), B:(-8, -27) </div>
                </div>
                <div class="image-container">
                    <img src="./media_proj1/aligned_lastochikino.jpg" alt="Result 6">
                    <div class="image-caption">R:(75, -6), B:(3, 2) </div>
                </div>
                <div class="image-container">
                    <img src="./media_proj1/aligned_lugano.jpg" alt="Result 7">
                     <div class="image-caption">R:(16, 5), B:(-9, -10)</div>
                </div>
                <div class="image-container">
                    <img src="./media_proj1/aligned_melons.jpg" alt="Result 8">
                    <div class="image-caption">R:(36, 10), B:(-24, -22) </div>
                </div>
                <div class="image-container">
                    <img src="./media_proj1/aligned_self_portrait.jpg" alt="Result 9">
                    <div class="image-caption">R:(56, 32), B:(-37, -35) </div>
                </div>
                <div class="image-container">
                    <img src="./media_proj1/aligned_siren.jpg" alt="Result 10">
                    <div class="image-caption">R:(37, -18), B:(-50, 6) </div>
                </div>
                <div class="image-container">
                    <img src="./media_proj1/aligned_three_generations.jpg" alt="Result 11">
                    <div class="image-caption">R:(59, -3), B:(-53, -14) </div>
                </div>
            </div>   
        </div> 

        
        <div class="question-section">
            <div class="question-header">
                <h2>Some extras!</h2>
            </div>

            <div class="images-row">
                <div class="image-container">
                    <img src="./media_proj1/aligned_castle.jpg" alt="Result 1">
                    <div class="image-caption">R:(7, -3), G:(3, -2) </div>
                </div>
                <div class="image-container">
                    <img src="./media_proj1/aligned_rainbow.jpg" alt="Result 2">
                     <div class="image-caption">R:(8, 0), G:(1, 0)</div>
                </div>
                <div class="image-container">
                    <img src="./media_proj1/aligned_roses.jpg" alt="Result 3">
                    <div class="image-caption">R:(8, 4), G:(3, 2) </div>
                </div>
            </div>
        </div>

        <div class="back-link">
            <a href="../index.html">üè† Back to Home</a>
        </div>
    </div>

</body>
</html>
